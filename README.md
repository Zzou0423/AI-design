# AI é—®å·åŠ©æ‰‹

åŸºäº RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰å’Œå¤§è¯­è¨€æ¨¡å‹çš„æ™ºèƒ½é—®å·ç”Ÿæˆä¸åˆ†æå·¥å…·ã€‚

## ğŸ“– å¿«é€Ÿå¯¼èˆª

- **ğŸš€ å¿«é€Ÿå¼€å§‹**: ğŸ‘‰ æŸ¥çœ‹ [`docs/QUICKSTART.md`](docs/QUICKSTART.md) - **5åˆ†é’Ÿå¿«é€Ÿå…¥é—¨æŒ‡å—**
- **ğŸ“š å®Œæ•´æ–‡æ¡£**: ç»§ç»­é˜…è¯»æœ¬æ–‡æ¡£
- **ğŸ—ï¸ é¡¹ç›®ç»“æ„**: [`docs/PROJECT_STRUCTURE.md`](docs/PROJECT_STRUCTURE.md)
- **ğŸ› ï¸ è„šæœ¬å·¥å…·**: [`scripts/generate_responses.py`](scripts/generate_responses.py) - æ‰¹é‡å›ç­”ç”Ÿæˆå™¨
- **ğŸ’¡ æ•…éšœæ’é™¤**: [`docs/`](docs/) ç›®å½• - å„ç±»æŠ€æœ¯æ–‡æ¡£

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

- ğŸ¤– **AI æ™ºèƒ½ç”Ÿæˆ**: æ ¹æ®éœ€æ±‚è‡ªåŠ¨ç”Ÿæˆä¸“ä¸šé—®å·
- ğŸ“ **å¤šç§é¢˜å‹æ”¯æŒ**: å•é€‰é¢˜ã€å¤šé€‰é¢˜ã€é‡è¡¨é¢˜ã€å¼€æ”¾é¢˜
- âœï¸ **é—®å·ç¼–è¾‘åŠŸèƒ½**: å¤åˆ¶é—®å·åˆ›å»ºæ–°ç‰ˆæœ¬ï¼Œæ”¯æŒå…¨æ–¹é¢ç¼–è¾‘
- ğŸ‘¤ **ç”¨æˆ·ç³»ç»Ÿ**: æ³¨å†Œã€ç™»å½•å’Œä¸ªäººé—®å·ç®¡ç†
- ğŸ”— **å¯åˆ†äº«é“¾æ¥**: ä¸€é”®ç”Ÿæˆå’Œå¤åˆ¶é—®å·é“¾æ¥
- ğŸ“Š **æ•°æ®å­˜å‚¨**: å›ç­”è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°
- ğŸ¤– **æ‰¹é‡å›ç­”ç”Ÿæˆ**: AI ç”Ÿæˆé—®å·æµ‹è¯•å›ç­”ï¼Œæ”¯æŒæ¨¡æ‹Ÿå¤šç§èº«ä»½
- ğŸ§  **æ™ºèƒ½åˆ†æ**: AI é©±åŠ¨çš„å¼€æ”¾é¢˜åˆ†æï¼Œè‡ªåŠ¨æå–ä¸»é¢˜å’Œæ´å¯Ÿ
- ğŸ¨ **ç°ä»£ç•Œé¢**: ç¾è§‚å‹å¥½çš„ç”¨æˆ·ç•Œé¢è®¾è®¡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. é…ç½®ç¯å¢ƒ

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```
DASHSCOPE_API_KEY=your_api_key_here
```

### 3. å¯åŠ¨ç³»ç»Ÿ

```bash
python run_all.py
```

æˆ–ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼š

```bash
start.bat
```

æµè§ˆå™¨å°†è‡ªåŠ¨æ‰“å¼€ http://localhost:8002

### 4. æµ‹è¯•è´¦å·

ä¸ºäº†ä¾¿äºå¼€æºæµ‹è¯•ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æµ‹è¯•è´¦å·ï¼š

- **ç”¨æˆ·å**: Zzou001
- **å¯†ç **: 124536

æ‚¨ä¹Ÿå¯ä»¥è‡ªè¡Œæ³¨å†Œæ–°è´¦å·ä½¿ç”¨ç³»ç»Ÿã€‚

## ğŸ¨ æ ¸å¿ƒåŠŸèƒ½è¯¦è§£

### âœ¨ æ™ºèƒ½éœ€æ±‚æ‰©å±•
- AI ä½œä¸ºè¡Œä¸šä¸“å®¶å¸®åŠ©å®Œå–„éœ€æ±‚
- å°†ç®€çŸ­æè¿°æ‰©å±•ä¸ºä¸“ä¸šã€è¯¦ç»†çš„è°ƒç ”éœ€æ±‚

### ğŸ“Š å¯è§†åŒ–è¿›åº¦
- å®æ—¶æ˜¾ç¤ºç”Ÿæˆæ­¥éª¤
- è¿›åº¦æ¡å’ŒçŠ¶æ€åŠ¨ç”»
- å½“å‰è¿›åº¦çš„æ¸…æ™°åé¦ˆ

### âœï¸ å®Œæ•´ç¼–è¾‘åŠŸèƒ½
- ç¼–è¾‘é—®å·åŸºæœ¬ä¿¡æ¯
- æ·»åŠ /åˆ é™¤/ä¿®æ”¹é—®é¢˜
- è°ƒæ•´é€‰é¡¹å’Œé‡è¡¨èŒƒå›´
- æ›´æ”¹é—®é¢˜ç±»å‹

### ğŸ”— ä¸€é”®åˆ†äº«
- å‘å¸ƒé—®å·ç”Ÿæˆå¯åˆ†äº«é“¾æ¥
- ä¸€é”®å¤åˆ¶åˆ†äº«ç»™ä»–äºº
- ç‹¬ç«‹çš„å¡«å†™é¡µé¢

## ğŸ“– ä½¿ç”¨æŒ‡å—

### ç”Ÿæˆé—®å·

1. æ³¨å†Œ/ç™»å½•è´¦å·
2. åœ¨é¦–é¡µè¾“å…¥é—®å·éœ€æ±‚ï¼ˆä¾‹å¦‚ï¼š"äº§å“æ»¡æ„åº¦è°ƒæŸ¥"ï¼‰
3. ç‚¹å‡»"ç”Ÿæˆé—®å·"æŒ‰é’®
4. ç­‰å¾… AI ç”Ÿæˆé—®å·ï¼ˆçº¦ 15-30 ç§’ï¼‰
5. ç¼–è¾‘é—®å·ï¼ˆå¯é€‰ï¼‰
6. ä¿å­˜é—®å·

### ç®¡ç†é—®å·

1. è¿›å…¥"å·¥ä½œç©ºé—´"æŸ¥çœ‹æ‰€æœ‰é—®å·
2. æŸ¥çœ‹ã€åˆ†äº«ã€åˆ†ææˆ–åˆ é™¤é—®å·
3. ç‚¹å‡»"åˆ†äº«"è·å–é—®å·é“¾æ¥
4. å°†é“¾æ¥å‘é€ç»™ä»–äººå¡«å†™

### å¡«å†™é—®å·

1. **å•é€‰é¢˜**ï¼šç‚¹å‡»é€‰é¡¹è¿›è¡Œé€‰æ‹©
2. **å¤šé€‰é¢˜**ï¼šå‹¾é€‰å¤šä¸ªé€‰é¡¹
3. **é‡è¡¨é¢˜**ï¼šç‚¹å‡» 1-5 æ•°å­—è¿›è¡Œè¯„åˆ†
4. **å¼€æ”¾é¢˜**ï¼šåœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥ç­”æ¡ˆ

### æŸ¥çœ‹å›ç­”

å›ç­”è‡ªåŠ¨ä¿å­˜åœ¨ `data/responses/{survey_title}_{survey_id}/` æ–‡ä»¶å¤¹ä¸­ï¼Œæ¯ä¸ªå›ç­”å¯¹åº”ä¸€ä¸ª JSON æ–‡ä»¶ã€‚

### æ‰¹é‡ç”Ÿæˆé—®å·å›ç­”ï¼ˆAI è¾…åŠ©ï¼‰

å¦‚æœéœ€è¦ç”Ÿæˆæ‰¹é‡æµ‹è¯•æ•°æ®ç”¨äºåˆ†æå’Œæµ‹è¯•ï¼Œå¯ä»¥ä½¿ç”¨ `generate_responses.py` è„šæœ¬ã€‚

#### åŠŸèƒ½è¯´æ˜

è¯¥è„šæœ¬ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰è‡ªåŠ¨ç”ŸæˆçœŸå®çš„é—®å·å›ç­”ï¼š
- ğŸ¯ **é€šç”¨é€‚é…**ï¼šè‡ªåŠ¨åˆ—å‡ºæ‰€æœ‰é—®å·ï¼Œæ”¯æŒä»»æ„ä¸»é¢˜
- ğŸ­ **æ™ºèƒ½èº«ä»½ç”Ÿæˆ**ï¼šæ ¹æ®é—®å·ä¸»é¢˜è‡ªåŠ¨ç”Ÿæˆå—è®¿è€…èº«ä»½
- ğŸ“ **é«˜è´¨é‡å›ç­”**ï¼šç”Ÿæˆé€»è¾‘ä¸€è‡´ã€è‡ªç„¶æµç•…çš„å›ç­”
- ğŸ”„ **æ‰¹é‡ç”Ÿæˆ**ï¼šæ”¯æŒæ‰¹é‡ç”Ÿæˆï¼Œå¯è‡ªå®šä¹‰æ•°é‡
- ğŸ’¾ **è‡ªåŠ¨ä¿å­˜**ï¼šå›ç­”è‡ªåŠ¨ä¿å­˜åˆ°å¯¹åº”é—®å·ç›®å½•

#### ä½¿ç”¨æ–¹æ³•

**äº¤äº’å¼ä½¿ç”¨ï¼ˆæ¨èï¼‰**ï¼š

```bash
python generate_responses.py
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. åˆ—å‡ºæ‰€æœ‰å¯ç”¨é—®å·
2. æ˜¾ç¤ºæ¯ä¸ªé—®å·çš„ç°æœ‰å›ç­”æ•°é‡
3. å…è®¸æ‚¨é€‰æ‹©è¦ç”Ÿæˆå›ç­”çš„é—®å·
4. è¾“å…¥è¦ç”Ÿæˆçš„å›ç­”æ•°é‡ï¼ˆé»˜è®¤ï¼š30ï¼‰
5. è‡ªåŠ¨ç”Ÿæˆå¹¶ä¿å­˜å›ç­”

#### ç‰¹æ€§

- **æ™ºèƒ½èº«ä»½ç”Ÿæˆ**ï¼šè„šæœ¬è°ƒç”¨ LLM æ ¹æ®é—®å·ä¸»é¢˜ç”Ÿæˆ 15 ç§ä¸åŒç±»å‹çš„å—è®¿è€…èº«ä»½
- **å€¾å‘æ§åˆ¶** âœ¨ï¼šå¯ä»¥æŒ‡å®šå›ç­”çš„æ•´ä½“å€¾å‘ï¼ˆç§¯æ/æ¶ˆæ/ä¸­æ€§/æ··åˆ/éšæœºï¼‰
  - ç”¨äºéªŒè¯åˆ†æç»“æœå‡†ç¡®æ€§
  - ç”Ÿæˆå¸¦æ ‡ç­¾çš„æµ‹è¯•æ•°æ®
  - è‡ªåŠ¨æ˜¾ç¤ºå€¾å‘åˆ†å¸ƒç»Ÿè®¡å’Œé¢„æœŸåˆ†æç»“æœ
- **å¹¶å‘ç”Ÿæˆ** ğŸš€ï¼šæ”¯æŒå¤šçº¿ç¨‹å¹¶å‘ç”Ÿæˆï¼Œæ˜¾è‘—æé«˜é€Ÿåº¦
  - é»˜è®¤ï¼š5 ä¸ªå¹¶å‘çº¿ç¨‹ï¼ˆå¯è°ƒæ•´ 3-10ï¼‰
  - 30 ä¸ªå›ç­”ï¼šçº¦ 1-2 åˆ†é’Ÿï¼ˆä¹‹å‰ä¸º 3-5 åˆ†é’Ÿï¼‰
  - 100 ä¸ªå›ç­”ï¼šçº¦ 3-6 åˆ†é’Ÿï¼ˆä¹‹å‰ä¸º 10-15 åˆ†é’Ÿï¼‰
- **å®æ—¶è¿›åº¦æ˜¾ç¤º**ï¼šæ˜¾ç¤ºæ‰¹é‡è¿›åº¦ã€å·²ç”¨æ—¶é—´ã€é¢„è®¡å‰©ä½™æ—¶é—´
- **å®¹é”™æœºåˆ¶**ï¼šå•ä¸ªå›ç­”ç”Ÿæˆå¤±è´¥ä¸ä¼šä¸­æ–­æ•´ä¸ªè¿‡ç¨‹

## ğŸ”§ API æ¥å£

### ç”¨æˆ·ç›¸å…³
- `POST /api/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/login` - ç”¨æˆ·ç™»å½•
- `POST /api/logout` - ç”¨æˆ·ç™»å‡º
- `GET /api/user/info` - è·å–ç”¨æˆ·ä¿¡æ¯
- `GET /api/user/surveys` - è·å–ç”¨æˆ·é—®å·åˆ—è¡¨
- `DELETE /api/user/surveys/{survey_id}` - åˆ é™¤é—®å·

### é—®å·ç›¸å…³
- `POST /api/generate` - ç”Ÿæˆé—®å·ï¼ˆæµå¼å“åº”ï¼‰
- `POST /api/save-survey` - ä¿å­˜é—®å·
- `GET /api/survey/{survey_id}` - è·å–é—®å·
- `GET /api/survey/{survey_id}/stats` - è·å–ç»Ÿè®¡ä¿¡æ¯

### å›ç­”ç›¸å…³
- `POST /api/submit-response` - æäº¤é—®å·å›ç­”
- `GET /fill/{survey_id}` - ç‹¬ç«‹å¡«å†™é¡µé¢

### åˆ†æç›¸å…³
- `POST /api/analyze/{survey_id}` - åˆ†æé—®å·ç»“æœ
  - è¯·æ±‚ä½“ï¼š`{"analysis_type": "open_ended"}` æˆ– `{"analysis_type": "full"}`
  - `open_ended`ï¼šä»…åˆ†æå¼€æ”¾é¢˜ï¼ˆé»˜è®¤ï¼‰
  - `full`ï¼šåˆ†ææ‰€æœ‰é¢˜å‹
- `GET /survey/{survey_id}?action=analyze` - åˆ†æé¡µé¢

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **FastAPI** - ç°ä»£ Web æ¡†æ¶
- **LangChain** - AI åº”ç”¨å¼€å‘æ¡†æ¶
- **ChromaDB** - å‘é‡æ•°æ®åº“
- **DashScope** - é˜¿é‡Œäº‘é€šä¹‰åƒé—®å¤§è¯­è¨€æ¨¡å‹
- **Pydantic** - æ•°æ®éªŒè¯å’Œå»ºæ¨¡

### å‰ç«¯
- **åŸç”Ÿ JavaScript** - å‰ç«¯äº¤äº’é€»è¾‘
- **HTML/CSS** - ç”¨æˆ·ç•Œé¢
- **Server-Sent Events** - å®æ—¶æµå¼å“åº”

### æ•°æ®å¤„ç†
- **Pandas** - æ•°æ®å¤„ç†
- **Matplotlib** - å›¾è¡¨ç»˜åˆ¶
- **WordCloud** - è¯äº‘ç”Ÿæˆ
- **Pillow** - å›¾åƒå¤„ç†

## ğŸ“Š æ•°æ®æµè½¬

### 1. é—®å·ç”Ÿæˆæµç¨‹

```
ç”¨æˆ·è¾“å…¥éœ€æ±‚ â†’ å‰ç«¯(app.js) â†’ API(/api/generate)
                                      â†“
                              SurveyService.generate_survey()
                                      â†“
                              RAGæ£€ç´¢ + LLMç”Ÿæˆ
                                      â†“
                              ä¿å­˜åˆ° data/surveys/
                                      â†“
                              è¿”å›JSON â†’ å‰ç«¯å±•ç¤º
```

### 2. é—®å·å¡«å†™æµç¨‹

```
ç”¨æˆ·è®¿é—®é—®å·é“¾æ¥ â†’ åŠ è½½HTML(fill_survey.js)
                        â†“
                   ç”¨æˆ·å¡«å†™å¹¶æäº¤
                        â†“
                   API(/api/submit_response)
                        â†“
                   ResponseSaver.save_response()
                        â†“
                   ä¿å­˜åˆ° data/responses/{survey_id}/
```

### 3. åˆ†ææµç¨‹

```
ç”¨æˆ·ç‚¹å‡»åˆ†ææŒ‰é’® â†’ API(/api/analyze/{survey_id})
                        â†“
            é€‰æ‹©åˆ†æç±»å‹ (open_ended / full)
                        â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â†“                           â†“
    SurveyAnalysisEngine      FullAnalysisService
          â†“                           â†“
    å¼€æ”¾é¢˜åˆ†æ                    å…¨é‡åˆ†æ
          â†“                           â†“
    ç”Ÿæˆå¯è§†åŒ–                    ç”Ÿæˆå¯è§†åŒ–
          â†“                           â†“
    è¿”å›æŠ¥å‘Š+å›¾è¡¨ â† â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ è¿”å›æŠ¥å‘Š+å›¾è¡¨
                        â†“
                   å‰ç«¯å±•ç¤º
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
ai_survey_assistant/
â”‚
â”œâ”€â”€ ğŸ“„ run_all.py                    # ä¸»ç¨‹åºå…¥å£ - FastAPIåº”ç”¨
â”œâ”€â”€ ğŸ“„ generate_responses.py         # æ‰¹é‡ç”Ÿæˆé—®å·ç­”æ¡ˆè„šæœ¬ï¼ˆæ”¯æŒå€¾å‘æ§åˆ¶ï¼‰
â”œâ”€â”€ ğŸ“„ start.bat                     # Windowså¿«é€Ÿå¯åŠ¨è„šæœ¬
â”œâ”€â”€ ğŸ“„ requirements.txt              # Pythonä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ ğŸ“„ README.md                     # é¡¹ç›®ä¸»æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ .gitignore                    # Gitå¿½ç•¥æ–‡ä»¶é…ç½®
â”‚
â”œâ”€â”€ ğŸ“‚ app/                          # æ ¸å¿ƒåº”ç”¨ä»£ç 
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ chains/                   # LangChainé“¾å¼è°ƒç”¨
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ survey_creation_chain.py  # RAGå¢å¼ºçš„é—®å·ç”Ÿæˆé“¾
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ core/                     # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ vector_store.py           # ChromaDBå‘é‡æ•°æ®åº“ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ models/                   # æ•°æ®æ¨¡å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ analysis_models.py        # åˆ†æç›¸å…³æ¨¡å‹ï¼ˆTheme, Sentiment, Reportç­‰ï¼‰
â”‚   â”‚   â””â”€â”€ user.py                   # ç”¨æˆ·æ¨¡å‹å’Œç”¨æˆ·å­˜å‚¨
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ services/                 # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ survey_service.py         # é—®å·ç”ŸæˆæœåŠ¡ï¼ˆRAG + LLMï¼‰
â”‚   â”‚   â”œâ”€â”€ analysis_engine.py        # å¼€æ”¾é¢˜åˆ†æå¼•æ“
â”‚   â”‚   â”œâ”€â”€ full_analysis_service.py  # å…¨é‡åˆ†ææœåŠ¡ï¼ˆé‡åŒ–+è´¨åŒ–ï¼‰
â”‚   â”‚   â”œâ”€â”€ qualitative_analyzer.py   # å®šæ€§åˆ†æå™¨ï¼ˆä¸»é¢˜ç¼–ç ï¼‰
â”‚   â”‚   â””â”€â”€ visualization_service.py  # æ•°æ®å¯è§†åŒ–æœåŠ¡ï¼ˆå›¾è¡¨ç”Ÿæˆï¼‰
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“‚ utils/                    # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ analysis_toolkit.py       # åˆ†æå·¥å…·é›†
â”‚       â”œâ”€â”€ response_saver.py         # é—®å·å›ç­”ä¿å­˜
â”‚       â”œâ”€â”€ session_manager.py        # ç”¨æˆ·ä¼šè¯ç®¡ç†
â”‚       â””â”€â”€ user_survey_manager.py    # ç”¨æˆ·é—®å·å…³è”ç®¡ç†
â”‚
â”œâ”€â”€ ğŸ“‚ static/                       # å‰ç«¯é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ login.html                    # ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ workspace.html                # å·¥ä½œç©ºé—´é¡µé¢
â”‚   â”œâ”€â”€ app.js                        # é—®å·ç”Ÿæˆäº¤äº’é€»è¾‘
â”‚   â”œâ”€â”€ fill_survey.js                # é—®å·å¡«å†™äº¤äº’é€»è¾‘
â”‚   â””â”€â”€ style.css                     # å…¨å±€æ ·å¼è¡¨
â”‚
â”œâ”€â”€ ğŸ“‚ data/                         # æ•°æ®å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“‚ surveys/                  # é—®å·å®šä¹‰æ–‡ä»¶ï¼ˆJSONï¼‰
â”‚   â”œâ”€â”€ ğŸ“‚ responses/                # é—®å·å›ç­”æ–‡ä»¶ï¼ˆJSONï¼‰
â”‚   â””â”€â”€ ğŸ“‚ analyses/                 # åˆ†æç»“æœæ–‡ä»¶ï¼ˆJSON + å›¾è¡¨ï¼‰
â”‚
â”œâ”€â”€ ğŸ“‚ docs/                         # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ QUICKSTART.md                # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”‚   â”œâ”€â”€ PROJECT_STRUCTURE.md         # é¡¹ç›®ç»“æ„æ–‡æ¡£
â”‚   â”œâ”€â”€ ANALYSIS_ARCHITECTURE.md     # åˆ†æåŠŸèƒ½æ¶æ„
â”‚   â””â”€â”€ PERFORMANCE_OPTIMIZATION.md  # æ€§èƒ½ä¼˜åŒ–æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“‚ rag_materials/                 # RAGå‚è€ƒèµ„æ–™
â”‚   â”œâ”€â”€ README.md                    # èµ„æ–™è¯´æ˜
â”‚   â””â”€â”€ *.pdf                        # å‚è€ƒæ–‡æ¡£
â”‚
â””â”€â”€ ğŸ“‚ scripts/                      # è¾…åŠ©è„šæœ¬
    â”œâ”€â”€ generate_responses.py        # æ‰¹é‡ç”Ÿæˆå›ç­”è„šæœ¬
    â”œâ”€â”€ backup.sh                    # å¤‡ä»½è„šæœ¬
    â””â”€â”€ check_deployment.py          # éƒ¨ç½²æ£€æŸ¥è„šæœ¬
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **API è°ƒç”¨æˆæœ¬**ï¼šç”Ÿæˆé—®å·å’Œåˆ†æéœ€è¦è°ƒç”¨ LLM APIï¼Œä¼šäº§ç”Ÿè´¹ç”¨
   - ç”Ÿæˆä¸€ä»½é—®å·ï¼šçº¦ 0.1-0.3 å…ƒï¼ˆå–å†³äºé—®å·é•¿åº¦ï¼‰
   - åˆ†æä¸€ä»½é—®å·ï¼šçº¦ 0.3-0.5 å…ƒï¼ˆå–å†³äºå›ç­”æ•°é‡ï¼‰

2. **æ•°æ®å®‰å…¨**ï¼šæ‰€æœ‰æ•°æ®ä¿å­˜åœ¨æœ¬åœ° `data/` ç›®å½•ï¼Œå»ºè®®å®šæœŸå¤‡ä»½

3. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - æ‰¹é‡ç”Ÿæˆå›ç­”æ—¶ï¼Œå»ºè®®è®¾ç½® 3-5 ä¸ªå¹¶å‘çº¿ç¨‹
   - å¤§å‹é—®å·åˆ†æå¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼Œå»ºè®®åˆ†æ‰¹å¤„ç†

4. **æµè§ˆå™¨å…¼å®¹æ€§**ï¼šæ”¯æŒ Chromeã€Firefoxã€Safariã€Edge ç­‰ç°ä»£æµè§ˆå™¨

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥å¸®åŠ©æ”¹è¿›é¡¹ç›®ï¼

## ğŸ“„ è®¸å¯è¯

MIT License

---

# AI Survey Assistant

An intelligent survey generation and analysis tool based on RAG (Retrieval-Augmented Generation) and large language models.

## ğŸ“– Quick Navigation

- **ğŸš€ Getting Started**: ğŸ‘‰ Check [`docs/QUICKSTART.md`](docs/QUICKSTART.md) - **5-minute Quick Start Guide**
- **ğŸ“š Complete Documentation**: Continue reading this document
- **ğŸ—ï¸ Project Structure**: [`docs/PROJECT_STRUCTURE.md`](docs/PROJECT_STRUCTURE.md)
- **ğŸ› ï¸ Script Tools**: [`scripts/generate_responses.py`](scripts/generate_responses.py) - Batch Answer Generator
- **ğŸ’¡ Troubleshooting**: [`docs/`](docs/) directory - Various technical documents

---

## âœ¨ Core Features

- ğŸ¤– **AI-Powered Generation**: Automatically generate professional surveys based on requirements
- ğŸ“ **Multiple Question Types**: Single choice, multiple choice, Likert scale, open-ended questions
- âœï¸ **Survey Editing**: Copy surveys to create new versions with full editing capabilities
- ğŸ‘¤ **User System**: Registration, login, and personal survey management
- ğŸ”— **Shareable Links**: One-click generation and copying of survey links
- ğŸ“Š **Data Storage**: Answers automatically saved locally
- ğŸ¤– **Batch Answer Generation**: AI-generated test answers for surveys, supporting multiple identity simulations
- ğŸ§  **Intelligent Analysis**: AI-driven open-ended question analysis with automatic theme extraction and insights
- ğŸ¨ **Modern Interface**: Beautiful and user-friendly design

## ğŸš€ Quick Start

### 1. Install Dependencies

```bash
pip install -r requirements.txt
```

### 2. Configure Environment

Create a `.env` file:

```
DASHSCOPE_API_KEY=your_api_key_here
```

### 3. Start the System

```bash
python run_all.py
```

Or use the startup script:

```bash
start.bat
```

Your browser will automatically open to http://localhost:8002

## ğŸ¨ Core Features Details

### âœ¨ Intelligent Requirement Expansion
- AI acts as an industry expert to help refine your requirements
- Expands brief descriptions into professional, detailed survey requirements

### ğŸ“Š Visual Progress
- Real-time display of generation steps
- Progress bars and status animations
- Clear feedback on current progress

### âœï¸ Full Editing Capabilities
- Edit basic survey information
- Add/delete/modify questions
- Adjust options and scale ranges
- Change question types

### ğŸ”— One-Click Sharing
- Publish surveys to generate shareable links
- One-click copying to share with others
- Independent filling pages

## ğŸ“– Usage Guide

### Generate a Survey

1. Register/login to your account
2. Enter survey requirements on the homepage (e.g., "Product Satisfaction Survey")
3. Click the "Generate Survey" button
4. Wait for AI to generate the survey (approximately 15-30 seconds)
5. Edit the survey (optional)
6. Save the survey

### Manage Surveys

1. Enter "Workspace" to view all surveys
2. View, share, analyze, or delete surveys
3. Click "Share" to get the survey link
4. Send the link to others to fill out

### Fill Out a Survey

1. **Single Choice**: Click an option to select
2. **Multiple Choice**: Check multiple options
3. **Likert Scale**: Click a number from 1-5 to rate
4. **Open-ended Questions**: Enter your answer in the text box

### View Responses

Responses are automatically saved in the `data/responses/{survey_title}_{survey_id}/` folder, with one JSON file per response.

### Batch Generate Survey Responses (AI-Assisted)

If you need to generate batch test data for analysis and testing, you can use the `generate_responses.py` script.

#### Feature Description

This script uses large language models (LLM) to automatically generate realistic survey answers:
- ğŸ¯ **Universal Adaptation**: Automatically lists all surveys, supporting any topic
- ğŸ­ **Smart Identity Generation**: Automatically generates respondent identities based on survey topics
- ğŸ“ **High-Quality Answers**: Generates logically consistent, natural-sounding answers
- ğŸ”„ **Batch Generation**: Supports batch generation with customizable quantity
- ğŸ’¾ **Automatic Saving**: Answers automatically saved to the corresponding survey directory

#### Usage

**Interactive Usage (Recommended)**: 

```bash
python generate_responses.py
```

The script will automatically:
1. List all available surveys
2. Show the number of existing answers for each survey
3. Allow you to select the survey for answer generation
4. Enter the number of answers to generate (default: 30)
5. Automatically generate and save answers

#### Features

- **Smart Identity Generation**: The script calls LLM to generate 15 different types of respondent identities based on the survey topic
- **Tendency Control** âœ¨: Can specify the overall tendency of answers (positive/negative/neutral/mixed/random)
  - For verifying analysis result accuracy
  - Generating labeled test data
  - Automatically displays tendency distribution statistics and expected analysis results
- **Concurrent Generation** ğŸš€: Supports multi-threaded concurrent generation for significantly improved speed
  - Default: 5 concurrent threads (adjustable 3-10)
  - 30 answers: ~1-2 minutes (previously 3-5 minutes)
  - 100 answers: ~3-6 minutes (previously 10-15 minutes)
- **Real-time Progress Display**: Shows batch progress, elapsed time, estimated remaining time
- **Error Tolerance**: Failed generation of a single answer won't interrupt the entire process

## ğŸ”§ API Interface

### User-related
- `POST /api/register` - User Registration
- `POST /api/login` - User Login
- `POST /api/logout` - User Logout
- `GET /api/user/info` - Get User Information
- `GET /api/user/surveys` - Get User Survey List
- `DELETE /api/user/surveys/{survey_id}` - Delete Survey

### Survey-related
- `POST /api/generate` - Generate Survey (Streaming Response)
- `POST /api/save-survey` - Save Survey
- `GET /api/survey/{survey_id}` - Get Survey
- `GET /api/survey/{survey_id}/stats` - Get Statistics

### Response-related
- `POST /api/submit-response` - Submit Survey Answer
- `GET /fill/{survey_id}` - Independent Filling Page

### Analysis-related
- `POST /api/analyze/{survey_id}` - Analyze Survey Results
  - Request Body: `{"analysis_type": "open_ended"}` or `{"analysis_type": "full"}`
  - `open_ended`: Analyze only open-ended questions (default)
  - `full`: Full analysis of all question types
- `GET /survey/{survey_id}?action=analyze` - Analysis Page

## ğŸ› ï¸ Technology Stack

### Backend
- **FastAPI** - Modern Web Framework
- **LangChain** - AI Application Development Framework
- **ChromaDB** - Vector Database
- **DashScope** - Alibaba Cloud Tongyi Qianwen Large Language Model
- **Pydantic** - Data Validation and Modeling

### Frontend
- **Native JavaScript** - Frontend Interaction Logic
- **HTML/CSS** - User Interface
- **Server-Sent Events** - Real-time Streaming Responses

### Data Processing
- **Pandas** - Data Processing
- **Matplotlib** - Chart Drawing
- **WordCloud** - Word Cloud Generation
- **Pillow** - Image Processing

## ğŸ“Š Data Flow

### 1. Survey Generation Process

```
User Input â†’ Frontend(app.js) â†’ API(/api/generate)
                                      â†“
                              SurveyService.generate_survey()
                                      â†“
                              RAG Retrieval + LLM Generation
                                      â†“
                              Save to data/surveys/
                                      â†“
                              Return JSON â†’ Frontend Display
```

### 2. Survey Filling Process

```
User Access Survey Link â†’ Load HTML(fill_survey.js)
                        â†“
                   User Fills and Submits
                        â†“
                   API(/api/submit_response)
                        â†“
                   ResponseSaver.save_response()
                        â†“
                   Save to data/responses/{survey_id}/
```

### 3. Analysis Process

```
User Clicks Analyze â†’ API(/api/analyze/{survey_id})
                        â†“
            Select Analysis Type (open_ended / full)
                        â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â†“                           â†“
    SurveyAnalysisEngine      FullAnalysisService
          â†“                           â†“
    Open-ended Analysis              Full Analysis
          â†“                           â†“
    Generate Visualization           Generate Visualization
          â†“                           â†“
    Return Report + Charts â† â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Return Report + Charts
                        â†“
                   Frontend Display
```

## ğŸ“ Project Structure

```
ai_survey_assistant/
â”‚
â”œâ”€â”€ ğŸ“„ run_all.py                    # Main Entry - FastAPI Application
â”œâ”€â”€ ğŸ“„ generate_responses.py         # Batch Survey Answer Generation Script (with tendency control)
â”œâ”€â”€ ğŸ“„ start.bat                     # Windows Quick Start Script
â”œâ”€â”€ ğŸ“„ requirements.txt              # Python Dependencies
â”œâ”€â”€ ğŸ“„ README.md                     # Project Main Documentation
â”œâ”€â”€ ğŸ“„ .gitignore                    # Git Ignore Configuration
â”‚
â”œâ”€â”€ ğŸ“‚ app/                          # Core Application Code
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ chains/                   # LangChain Chains
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ survey_creation_chain.py  # RAG-Enhanced Survey Generation Chain
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ core/                     # Core Functionality
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ vector_store.py           # ChromaDB Vector Database Management
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ models/                   # Data Models
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ analysis_models.py        # Analysis Models (Theme, Sentiment, Report, etc.)
â”‚   â”‚   â””â”€â”€ user.py                   # User Model and Storage
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ services/                 # Business Logic Services
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ survey_service.py         # Survey Generation Service (RAG + LLM)
â”‚   â”‚   â”œâ”€â”€ analysis_engine.py        # Open-ended Question Analysis Engine
â”‚   â”‚   â”œâ”€â”€ full_analysis_service.py  # Full Analysis Service (Quantitative + Qualitative)
â”‚   â”‚   â”œâ”€â”€ qualitative_analyzer.py   # Qualitative Analyzer (Thematic Coding)
â”‚   â”‚   â””â”€â”€ visualization_service.py  # Data Visualization Service (Chart Generation)
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“‚ utils/                    # Utility Functions
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ analysis_toolkit.py       # Analysis Toolkit
â”‚       â”œâ”€â”€ response_saver.py         # Survey Response Saving
â”‚       â”œâ”€â”€ session_manager.py        # User Session Management
â”‚       â””â”€â”€ user_survey_manager.py    # User-Survey Association Management
â”‚
â”œâ”€â”€ ğŸ“‚ static/                       # Frontend Static Files
â”‚   â”œâ”€â”€ login.html                    # Login Page
â”‚   â”œâ”€â”€ workspace.html                # Workspace Page
â”‚   â”œâ”€â”€ app.js                        # Survey Generation Interaction Logic
â”‚   â”œâ”€â”€ fill_survey.js                # Survey Filling Interaction Logic
â”‚   â””â”€â”€ style.css                     # Global Styles
â”‚
â”œâ”€â”€ ğŸ“‚ data/                         # Data Storage Directory
â”‚   â”œâ”€â”€ ğŸ“‚ surveys/                  # Survey Definition Files (JSON)
â”‚   â”œâ”€â”€ ğŸ“‚ responses/                # Survey Response Files (JSON)
â”‚   â””â”€â”€ ğŸ“‚ analyses/                 # Analysis Result Files (JSON + Charts)
â”‚
â”œâ”€â”€ ğŸ“‚ docs/                         # Project Documentation
â”‚   â”œâ”€â”€ QUICKSTART.md                # Quick Start Guide
â”‚   â”œâ”€â”€ PROJECT_STRUCTURE.md         # Project Structure Documentation
â”‚   â”œâ”€â”€ ANALYSIS_ARCHITECTURE.md     # Analysis Function Architecture
â”‚   â””â”€â”€ PERFORMANCE_OPTIMIZATION.md  # Performance Optimization Documentation
â”‚
â”œâ”€â”€ ğŸ“‚ rag_materials/                 # RAG Reference Materials
â”‚   â”œâ”€â”€ README.md                    # Materials Description
â”‚   â””â”€â”€ *.pdf                        # Reference Documents
â”‚
â””â”€â”€ ğŸ“‚ scripts/                      # Auxiliary Scripts
    â”œâ”€â”€ generate_responses.py        # Batch Answer Generation Script
    â”œâ”€â”€ backup.sh                    # Backup Script
    â””â”€â”€ check_deployment.py          # Deployment Check Script
```

## ğŸ“ Notes

1. **API Call Costs**: Generating surveys and analysis requires calling LLM APIs, which incur costs
   - Generating a survey: ~0.1-0.3 yuan (depending on survey length)
   - Analyzing a survey: ~0.3-0.5 yuan (depending on the number of responses)

2. **Data Security**: All data is saved in the local `data/` directory, regular backups are recommended

3. **Performance Optimization**:
   - When generating answers in batches, it is recommended to set 3-5 concurrent threads
   - Large survey analysis may take longer, it is recommended to process in batches

4. **Browser Compatibility**: Supports Chrome, Firefox, Safari, Edge and other modern browsers

## ğŸ¤ Contribution

Welcome to submit Issues and Pull Requests to help improve the project!

## ğŸ“„ License

MIT License
