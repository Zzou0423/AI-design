# RAG 语料文件夹

此文件夹用于存放问卷样例资料，用于构建 RAG（检索增强生成）向量数据库。

## 📖 使用方法

### 1. 添加语料文件

将您的问卷样例PDF文件放入此文件夹：

```
rag_materials/
├── 用户满意度调查样例.pdf
├── 产品使用体验问卷.pdf
└── 其他问卷样例/
    └── 行业调研问卷.pdf
```

**支持的功能：**
- ✅ PDF文件格式
- ✅ 支持嵌套文件夹（可创建子文件夹分类管理）
- ✅ 自动扫描所有PDF文件

### 2. 更新向量数据库

添加或修改PDF文件后，运行以下命令更新向量数据库：

```bash
python update_rag_materials.py
```

**脚本功能：**
- 🔍 自动扫描 `rag_materials/` 文件夹中的所有PDF文件
- 📝 只处理新增或修改的文件（增量更新）
- 💾 更新向量数据库，使新语料可用于问卷生成

### 3. 验证更新

运行更新脚本后，会显示：
- ✅ 处理的文件列表
- 📊 向量数据库统计信息
- ✓ 成功/失败的处理结果

## 📋 文件格式要求

- **文件格式**: PDF (.pdf)
- **文件大小**: 建议每个文件不超过 50MB
- **内容要求**: 问卷样例、问卷设计文档、问卷模板等

## 🔧 重新构建向量数据库

如果需要完全重新构建向量数据库（删除所有旧数据），请：

1. 删除向量数据库目录：
   ```bash
   rm -rf data/chroma_db
   ```

2. 删除索引文件（可选）：
   ```bash
   rm rag_materials/.rag_index.json
   ```

3. 重新运行更新脚本：
   ```bash
   python update_rag_materials.py
   ```

## 💡 使用建议

1. **定期更新**: 当有新问卷样例时，及时添加到文件夹并运行更新脚本
2. **文件命名**: 使用有意义的文件名，便于管理和识别
3. **分类管理**: 可以创建子文件夹按类别组织语料文件
4. **质量优先**: 添加高质量的问卷样例，有助于生成更好的问卷

## 📊 工作原理

1. **扫描阶段**: 扫描文件夹中的所有PDF文件
2. **索引对比**: 对比文件哈希值，识别新增或修改的文件
3. **文档加载**: 加载PDF内容并切分为文本块
4. **向量化**: 将文本块转换为向量并存储到向量数据库
5. **持久化**: 保存向量数据库和文件索引

## ❓ 常见问题

**Q: 添加PDF后，生成的问卷没有使用新语料？**  
A: 需要运行 `python update_rag_materials.py` 来更新向量数据库。

**Q: 可以支持其他格式的文件吗？**  
A: 目前只支持PDF格式。如需支持其他格式（Word、TXT等），可以扩展 `update_rag_materials.py` 脚本。

**Q: 向量数据库文件在哪里？**  
A: 存储在 `data/chroma_db/` 目录中。

**Q: 如何查看向量数据库中有多少文档？**  
A: 运行更新脚本后，会显示统计信息，包括文档数量。

